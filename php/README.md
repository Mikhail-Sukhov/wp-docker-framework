# Конфигурации PHP

Папка `php` содержит конфигурационные файлы для настройки PHP и PHP-FPM. PHP используется для обработки PHP-скриптов в WordPress-проектах, а PHP-FPM — это FastCGI-менеджер процессов для эффективной обработки PHP-запросов.

## Содержание

- [Описание структуры папки](#описание-структуры-папки)
  - [Конфигурационные файлы](#конфигурационные-файлы)
    - [php-fpm.conf](#php-fpmconf)
    - [php.ini](#phpini)
- [Использование](#использование)
- [Лицензия](#лицензия)

## Описание структуры папки

### Конфигурационные файлы

#### `php-fpm.conf`

Конфигурационный файл для PHP-FPM. Содержит настройки для управления процессами PHP-FPM.

**Основные параметры:**
- **`[global]`**: Глобальные настройки PHP-FPM.
  - **`daemonize = no`**: Запрещает запуск PHP-FPM в режиме демона (используется в Docker).
- **`[www]`**: Настройки пула процессов для обработки PHP-запросов.
  - **`user = www-data`**: Указывает пользователя, от имени которого будут выполняться процессы PHP-FPM.
  - **`group = www-data`**: Указывает группу пользователя.
  - **`listen = /run/php/php83-fpm.sock`**: Указывает путь к сокету для взаимодействия с Nginx.
  - **`listen.owner = www-data`**: Указывает владельца сокета.
  - **`listen.group = www-data`**: Указывает группу сокета.
  - **`pm = dynamic`**: Режим управления процессами (динамический).
  - **`pm.max_children = 5`**: Максимальное количество дочерних процессов.
  - **`pm.start_servers = 2`**: Количество процессов, запускаемых при старте.
  - **`pm.min_spare_servers = 1`**: Минимальное количество свободных процессов.
  - **`pm.max_spare_servers = 3`**: Максимальное количество свободных процессов.
  - **`php_admin_value[error_log] = /var/log/php-fpm/www-error.log`**: Указывает путь к логу ошибок PHP-FPM.

#### `php.ini`

Конфигурационный файл для PHP. Содержит настройки для работы PHP.

**Основные параметры:**
- **`engine = On`**: Включает обработку PHP-скриптов.
- **`short_open_tag = Off`**: Отключает использование коротких тегов `<?`.
- **`precision = 14`**: Указывает количество знаков после запятой для чисел с плавающей точкой.
- **`output_buffering = 4096`**: Включает буферизацию вывода.
- **`max_execution_time = 30`**: Максимальное время выполнения скрипта (в секундах).
- **`memory_limit = 128M`**: Максимальный объем памяти, который может использовать скрипт.
- **`error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT`**: Уровень отчетов об ошибках.
- **`display_errors = Off`**: Отключает вывод ошибок на экран.
- **`log_errors = On`**: Включает логирование ошибок.
- **`post_max_size = 8M`**: Максимальный размер данных, отправляемых методом POST.
- **`upload_max_filesize = 2M`**: Максимальный размер загружаемых файлов.
- **`date.timezone = "Europe/Moscow"`**: Устанавливает временную зону.

## Использование

### Настройка PHP-FPM

1. Перейдите в папку `php/config`:
   ```bash
   cd php/config
   ```
2. Отредактируйте файл `php-fpm.conf` для изменения настроек PHP-FPM.
3. Перезапустите контейнер для применения изменений:
   ```bash
   ../scripts/nginx-restart.sh
   ```

### Настройка PHP

1. Перейдите в папку `php/config`:
   ```bash
   cd php/config
   ```
2. Отредактируйте файл `php.ini` для изменения настроек PHP.
3. Перезапустите контейнер для применения изменений:
   ```bash
   ../scripts/nginx-restart.sh
   ```

### Просмотр логов

1. Логи PHP-FPM хранятся в файле `/var/log/php-fpm/www-error.log` внутри контейнера.
2. Для просмотра логов войдите в контейнер:
   ```bash
   ../scripts/conteiner-bash.sh
   ```
3. Используйте команду `tail` для просмотра логов в реальном времени:
   ```bash
   tail -f /var/log/php-fpm/www-error.log
   ```

