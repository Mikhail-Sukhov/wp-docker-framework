# Скрипты автоматизации

Папка `scripts` содержит набор скриптов для автоматизации работы с Docker-контейнерами и WordPress. Эти скрипты упрощают создание проектов, управление правами доступа, экспорт данных и другие задачи.

## Содержание

- [Описание скриптов](#описание-скриптов)
  - [add_host.sh](#add_hostsh)
  - [conteiner-bash.sh](#conteiner-bashsh)
  - [create_project.sh](#create_projectsh)
  - [nginx-restart.sh](#nginx-restartsh)
  - [nginx-wwwdata.sh](#nginx-wwwdatash)
  - [sql-777.sh](#sql-777sh)
  - [to_server.sh](#to_serversh)

## Описание скриптов

### `add_host.sh`

Скрипт для добавления домена в файл `/etc/hosts` для локальной разработки. Он позволяет быстро настроить локальный домен для вашего проекта.

**Использование:**
```bash
./add_host.sh
```

**Действия:**
1. Сканирует папки в директории `../www/`.
2. Выводит список доступных проектов.
3. Запрашивает выбор проекта для добавления в `/etc/hosts`.
4. Добавляет запись `127.0.0.1 <выбранный_домен>` в файл `/etc/hosts`.

### `conteiner-bash.sh`

Скрипт для входа в терминал Docker-контейнера. Полезен для выполнения команд внутри контейнера.

**Использование:**
```bash
./conteiner-bash.sh
```

**Действия:**
1. Открывает терминал внутри контейнера с помощью команды `docker exec -it lemp sh`.

### `create_project.sh`

Скрипт для создания нового WordPress-проекта. Он автоматически настраивает базу данных, копирует файлы WordPress и настраивает конфигурацию Nginx.

**Использование:**
```bash
./create_project.sh
```

**Действия:**
1. Запрашивает имя нового проекта.
2. Скачивает и распаковывает WordPress.
3. Копирует базовый шаблон темы в папку нового проекта.
4. Настраивает права доступа для папок и файлов.
5. Создает базу данных с именем проекта.
6. Настраивает `wp-config.php` для подключения к базе данных.
7. Создает конфигурацию Nginx для нового проекта.
8. Добавляет запись в `/etc/hosts` для локального домена.
9. Перезапускает Nginx.

### `nginx-restart.sh`

Скрипт для перезапуска Nginx внутри Docker-контейнера. Используется для применения изменений в конфигурации Nginx.

**Использование:**
```bash
./nginx-restart.sh
```

**Действия:**
1. Перезапускает Nginx внутри контейнера с помощью команды `docker exec -it lemp nginx -s reload`.

### `nginx-wwwdata.sh`

Скрипт для управления правами доступа для папки `www` внутри Docker-контейнера. Позволяет установить права доступа для папок и файлов проекта.

**Использование:**
```bash
./nginx-wwwdata.sh
```

**Действия:**
1. Сканирует папки в директории `../www/`.
2. Выводит список доступных проектов.
3. Запрашивает выбор проекта для изменения прав доступа.
4. Предлагает выбрать вариант прав доступа:
   - `777` для всех файлов и каталогов.
   - `755` для каталогов и `644` для файлов.
5. Применяет выбранные права доступа к папке проекта.

### `sql-777.sh`

Скрипт для изменения прав доступа для папки MySQL внутри Docker-контейнера. Используется для устранения проблем с доступом к базе данных.

**Использование:**
```bash
./sql-777.sh
```

**Действия:**
1. Изменяет права доступа для папки `/var/lib/mysql` на `777` внутри контейнера.

### `to_server.sh`

Скрипт для экспорта проекта для переноса на сервер. Он создает архив с файлами проекта и экспортирует базу данных.

**Использование:**
```bash
./to_server.sh
```

**Действия:**
1. Сканирует папки в директории `../www/`.
2. Выводит список доступных проектов.
3. Запрашивает выбор проекта для экспорта.
4. Создает архив с файлами проекта, исключая папки `to_server` и `---- SRC ----`.
5. Экспортирует базу данных в SQL-файл.
6. Запрашивает новый URL для замены в базе данных.
7. Заменяет все вхождения старого домена на новый URL в SQL-файле.
8. Сохраняет архив и SQL-файл в папку `to_server` внутри проекта.
